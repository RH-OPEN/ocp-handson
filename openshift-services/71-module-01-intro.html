<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>仮想マシン管理 :: OpenShift Handson</title>
    <link rel="canonical" href="https://rh-open.github.io/ocp-handson/openshift-services/71-module-01-intro.html">
    <link rel="prev" href="70-index.html">
    <link rel="next" href="72-module-02-mtv.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://rh-open.github.io/ocp-handson">OpenShift Handson</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="openshift-services" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">01. OpenShift 基礎</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01_app-mgmt-basics.html">1. コンテナデプロイと管理</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01_app-deployment.html">2. Web コンソールの利用</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02_app-storage-basics.html">3. 永続ストレージ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03_machinesets.html">4. ノードの動的管理</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04_infra-nodes.html">5. Infra ノードの作成</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06_template-quota-limits.html">6. Project のクオータ/制限</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="07_clusterresourcequota.html">7. クラスタのクオータ設定</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">20. OpenShift Pipeline Lab</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="10-pipeline-install.html">インストール</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11-pipelines.html">1. Pipelines -1/2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-add-task.html">2. Pipelines -2/2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="13-triggers.html">3. Tekton Triggers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">21. OpenShift GitOps Lab</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20-GitOps-install.html">インストール</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="21-GitOps.html">1. OpenShift GitOps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="22-Kustomize.html">2. Kustomizeインテグレーション</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="23-Helm.html">3. Helmインテグレーション</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">51. Red Hat OpenShift Service on AWS (ROSA) Lab</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="50-rosa-info.html">0. はじめに</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="51-rosa-hcp-create.html">1. ROSA HCPクラスターの作成 [デモ]</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="52-rosa-app-deploy.html">2. サンプルアプリケーションのデプロイ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="53-rosa-ebs.html">3. Amazon EBSの利用</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="54-1-rosa-web-terminal.html">4. Web Terminalの利用</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="54-2-rosa-dev-spaces.html">5. Web IDEを利用した開発</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="58-rosa-bedrock.html">6. Amazon Bedrockアプリケーションの実行</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="55-1-rosa-log-01.html">7. ロギング設定 [デモ]</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="55-1-rosa-log-02.html">8. OpenShiftコンソールでのログ確認</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="55-2-rosa-monitoring.html">9. モニタリング</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="55-3-rosa-project-metrics.html">10. プロジェクトのメトリクスデータの確認</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="55-4-rosa-alert.html">11. アラート設定</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="56-rosa-nodes.html">12. ワーカーノードの追加と削除</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="57-rosa-upgrade.html">13. ROSA HCPクラスターの更新</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">61. Azure Red Hat OpenShift (ARO) Lab</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="60-aro-info.html">0. はじめに</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="61-aro-create.html">1. AROクラスターの作成 [デモ]</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="62-aro-app-deploy.html">2. サンプルアプリケーションのデプロイ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="63-aro-storage.html">3. Azure DiskとAzure Filesの利用</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="64-aro-web-terminal.html">4. Web Terminalの利用</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="65-aro-dev-spaces.html">5. Web IDEを利用した開発</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="66-aro-logging.html">6. ロギング</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="67-1-aro-monitoring.html">7. モニタリング</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="67-2-aro-project-metrics.html">8. プロジェクトのメトリクスデータの確認</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="67-3-aro-alert.html">9. アラート設定</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="68-aro-nodes.html">10. ワーカーノードの追加と削除</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="69-aro-upgrade.html">11. AROクラスターの更新[デモ]</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">71. OpenShift Virtualization Lab</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="70-index.html">0. はじめに</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="71-module-01-intro.html">1. 仮想マシン管理</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="72-module-02-mtv.html">2. 既存の仮想マシンの移行</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="73-module-04-storage.html">3. ストレージ管理</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="74-module-05-bcdr.html">4. 仮想マシンのバックアップとリカバリ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="75-module-07-tempinst.html">5. テンプレートとインスタンスタイプの管理</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="76-module-08-workingvms.html">6. 仮想マシンとアプリケーションの操作</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="78-module-09-networking.html">7. 仮想マシンのネットワーク管理</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="79-conclusion.html">8. 追加情報</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">81. Day 2 Operations and Automation with OpenShift Virtualization</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="80-index.html">0. はじめに</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="81-module-01-day-to-day.html">1. 日々の基本的な操作の有効化</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="82-module-02-real-world-scaling.html">2. 実環境でのスケーリングシナリオ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="83-module-03-to-the-moon.html">3. 無限の可能性へ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="84-conclusion.html">4. 追加情報</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenShift Handson</a></li>
    <li>71. OpenShift Virtualization Lab</li>
    <li><a href="71-module-01-intro.html">1. 仮想マシン管理</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/RH-OPEN/ocp-handson/edit/master/documentation/modules/ROOT/pages/71-module-01-intro.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">仮想マシン管理</h1>
<div class="sect1">
<h2 id="_はじめに"><a class="anchor" href="#_はじめに"></a>はじめに</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このラボの最初のセクションでは、OpenShift Virtualization における仮想マシンの作成と管理の基本について紹介します。OpenShift 4.18 から、仮想化ベースの資産を視覚化し管理しやすくする新しい仮想化パースペクティブと仮想マシンのツリービューが追加されました。UIの変更について確認した後、事前定義されたテンプレートから仮想マシンを作成するプロセス全体をウェブコンソールがどのようにガイドするかを説明します。その後、そのVMのプロパティを確認し、基本的なカスタマイズを行い、仮想マシン管理者に求められることが多いライブマイグレーションなどの操作を行います。</p>
</div>
<div class="ulist">
<div class="title"><strong>目標</strong></div>
<ul>
<li>
<p>新しい仮想マシンを作成する</p>
</li>
<li>
<p>仮想マシンのリソースを確認し、変更する</p>
</li>
<li>
<p>OpenShift コンソールを使用して VM の電源状態がどのように管理されるかを理解する</p>
</li>
<li>
<p>2 つのホスト間で VM をライブマイグレーションする</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>念のため、OpenShift コンソールへの認証情報は以下の通りです。</p>
</div>
<div class="paragraph">
<p>OpenShift クラスタコンソールは {openshift_console_url} で利用可能です。</p>
</div>
<div class="paragraph">
<p>ログインは以下で可能です。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>User:</strong> {user}</p>
</li>
<li>
<p><strong>Password:</strong> {password}</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="virt_persona"><a class="anchor" href="#virt_persona"></a>Virtualization パースペクティブへの切り替え</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>最初にログインすると、<strong>Developer</strong> (開発者)パースペクティブが表示され、紹介プロンプトが表示されます。 <strong>Skip tour</strong> ボタンをクリックしてウィンドウを閉じます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/00_Dev_Perspective.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/00_Dev_Perspective.png" alt="00 Dev Perspective" width="100%"></a>
</div>
</div>
</li>
<li>
<p>次に、左上にある <strong>Developer</strong> をクリックし、 <strong>Virtualization</strong> のパースペクティブに切り替えます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/01_Virt_Perspective.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/01_Virt_Perspective.png" alt="01 Virt Perspective" width="100%"></a>
</div>
</div>
</li>
<li>
<p>OpenShift Virtualization への歓迎を告げるプロンプトが表示されます。 <strong>Do not show this again</strong>（次回以降表示しない）のチェックボックスをクリックすると、ウィンドウが消えます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/02_Welcome_Virt.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/02_Welcome_Virt.png" alt="02 Welcome Virt" width="100%"></a>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="explore_virt"><a class="anchor" href="#explore_virt"></a>OpenShift Virtualization の探索</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Virtualization</strong> ビューに到着すると、現在使用中のすべての仮想化リソースの概要を表示する <strong>Overview</strong> ページが表示されます。少し時間を取って探索してみましょう。</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/03_Virt_Overview.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/03_Virt_Overview.png" alt="03 Virt Overview" width="100%"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>Virtualization</strong> パースペクティブは、Red Hat OpenShift Virtualizationがインストールされ、適切に構成されている場合のみ利用可能です。このラボ環境では、インストールと構成はすでに実行済みです。
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>左側のサイドメニューで <strong>VirtualMachines</strong> 項目をクリックすると、すべてのVMアセットの仮想化ツリービューが表示されます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/04_Tree_View.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/04_Tree_View.png" alt="04 Tree View" width="100%"></a>
</div>
</div>
</li>
<li>
<p>このページを少し見てみましょう。このビューは3つの列に分かれており、左側には管理メニュー、中央にはVMベースのプロジェクトの構成、そして仮想マシンビューがあります。</p>
</li>
<li>
<p>左側のメニューは、OpenShiftの仮想化統合機能の主なコントロールです。仮想マシンを構築するためのカタログ、テンプレート、インスタンスタイプなどの仮想化関連の項目や、仮想マシンのストレージとネットワークを設定するメニューが表示されています。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/05_Left_Menu.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/05_Left_Menu.png" alt="05 Left Menu" width="100%"></a>
</div>
</div>
</li>
<li>
<p>前述の中央の列はプロジェクトビューです。OpenShiftの他のオブジェクトと同様に、プロジェクト（Kubernetesのネームスペースの抽象化）は、ユーザーがリソースを使用および管理する際に必要な権限やその他の要素が適用される管理画面です。デフォルトでは、ここにスライダーがあり、既存のVMを持つプロジェクトのみが表示されます。現在、表示できるプロジェクトは <strong>vmimported-{user}</strong> のみです。これは、仮想マシンにアクセスできる唯一のプロジェクトだからです。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/06_Project_Tree.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/06_Project_Tree.png" alt="06 Project Tree" width="100%"></a>
</div>
</div>
</li>
<li>
<p>仮想マシン概要の列には、デフォルトで「すべてのプロジェクト」がリスト表示され、共有クラスター環境内のすべてのユーザーのVMが表示されます。列を並べ替えることでVMの検索が容易になり、また、列の表示をアレンジして整理することも可能です。中央の列で特定のプロジェクトまたは仮想マシンをハイライトすると、この表示が変更されます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/07_VM_List.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/07_VM_List.png" alt="07 VM List" width="100%"></a>
</div>
</div>
</li>
<li>
<p>中央の列からプロジェクト <strong>vmimported-{user}</strong> をクリックすると、現在展開され、特定のユーザーアカウントで利用可能な仮想マシンが表示されます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/08_VM_Imported_Project.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/08_VM_Imported_Project.png" alt="08 VM Imported Project" width="100%"></a>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
ラボガイドは、可能な限り動的に設定され、お客様の特定のユーザーアカウントとプロジェクト名を表示するように構成されていますが、ラボガイド内の画像は固定されており、異なるユーザーが表示される場合があります。そのため、これらのタスクは、お客様のユーザーアカウントと関連プロジェクトを参照して実行してください。
</td>
</tr>
</table>
</div>
</li>
<li>
<p>仮想マシンの概要の列には、<strong>vmimported-{user}</strong> プロジェクト内の仮想マシンだけが表示されます。3つのVMがリスト表示されますが、現在はオンになっていません。これらはラボの後半部分で使用します。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/09_VMs_Stopped.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/09_VMs_Stopped.png" alt="09 VMs Stopped" width="100%"></a>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create_project"><a class="anchor" href="#create_project"></a>新しいプロジェクトを作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>VMを作成する前に、新しいプロジェクトを作成する必要があります。仮想マシンは特定のプロジェクト、またはネームスペースにデプロイされ、デフォルトでは、ネームスペースへのアクセス権限のないユーザーは、仮想マシンにアクセス、管理、制御できません。管理者はすべてのプロジェクトにアクセスでき、すべての仮想マシンを表示できますが、一般ユーザーは必要に応じてプロジェクトへのアクセス権限を付与する必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>中央のツリー表示カラムの右上にある <strong>Create Project</strong> をクリックします。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/10_Column_Create.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/10_Column_Create.png" alt="10 Column Create" width="100%"></a>
</div>
</div>
</li>
<li>
<p><strong>Name</strong> フィールドに <strong>vmexamples-{user}</strong> と入力してプロジェクト名を指定し、 <strong>Create</strong> をクリックします。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/11_Create_Project.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/11_Create_Project.png" alt="11 Create Project" width="100%"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
この新しいプロジェクトをすぐに表示するために、仮想マシン概要の列が変更されていますが、プロジェクト内にVMが存在しないため、中央の列には表示されません。また、デフォルトでは表示しないオプションがオンになっています。
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create_vm"><a class="anchor" href="#create_vm"></a>Linux 仮想マシンの作成</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>仮想マシン概要の列から、 <strong>Create VirtualMachine</strong> ボタンをクリックし、ドロップダウンメニューから <strong>From template</strong> を選択します。</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
VM は、InstanceType ウィザードから作成することも、カスタムの YAML 定義を入力して作成することもできますが、今回のラボのシナリオでは、既存のテンプレートをベースとした VM の作成に限定します。
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/12_Create_VM_Button.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/12_Create_VM_Button.png" alt="12 Create VM Button" width="100%"></a>
</div>
</div>
</li>
<li>
<p>カタログ画面に移動し、利用可能な事前定義のVMテンプレートを示す多数のタイルが表示されます。</p>
<div class="paragraph">
<p>利用可能なテンプレートのリストを確認すると、一部に青いバッジが付いているものがあることに気づくでしょう。これは、自動的にダウンロードされ保存されたテンプレートソースディスクを使用しているテンプレートであることを示しています。</p>
</div>
<div class="paragraph">
<p>利用可能なオプションをカスタマイズできる環境で展開している場合は、これらのブートソースのデフォルトでの可用性を変更したり、これらのソースディスクを削除したりすることができます。</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/13_Create_VM_Templates.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/13_Create_VM_Templates.png" alt="13 Create VM Templates" width="100%"></a>
</div>
</div>
</li>
<li>
<p><strong>Fedora VM</strong> タイルを選択すると、ダイアログが開きます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/14_Create_VM_Quick.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/14_Create_VM_Quick.png" alt="14 Create VM Quick" width="100%"></a>
</div>
</div>
</li>
<li>
<p>名前を <strong>fedora01</strong> に変更し、<strong>Quick create VirtualMachine</strong> をクリックします。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/15_Create_VM_Quick_Name.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/15_Create_VM_Quick_Name.png" alt="15 Create VM Quick Name" width="100%"></a>
</div>
</div>
</li>
<li>
<p>ツリービューに戻り、仮想マシン概要の列に新しいVMの情報が表示されていることを確認します。また、VMが含まれているため、中央の列に <strong>vmexamples-{user}</strong> プロジェクトが表示され、プロジェクト内でハイライトされていることに注目してください。</p>
</li>
<li>
<p>よく見ると、仮想マシン概要の列で、VMステータスが <strong>Provisioning</strong> から <strong>Starting</strong> に変わり、準備が整うと <strong>Running</strong> に変わっていることが分かります。</p>
<div class="paragraph">
<p>この間、ストレージプロバイダはテンプレートディスクを複製し、新しく作成された仮想マシンで使用できるようにしています。この処理にかかる時間は、ブートディスクの作成に使用するストレージプロバイダや、システムの現在の負荷によって異なります。</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/16_Fedora_Running.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/16_Fedora_Running.png" alt="16 Fedora Running" width="100%"></a>
</div>
</div>
</li>
<li>
<p>仮想マシンが起動したら、右側の列にある <strong>Overview</strong> ページでさらに詳しく調べることができます:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Details</strong>：このタイルには、VM の名前、ステータス、作成時間、OS、仮想リソース、および作成元のテンプレートなど、VM に関する情報が表示されます。また、VNC 端末の縮小版と、フルスクリーン Web コンソールを起動する機能も含まれています。</p>
</li>
<li>
<p><strong>General</strong>：このタイルには、ゲストが実行されている Namespace (プロジェクト)、インスタンス名、および Kubernetes Podなど、OpenShift 固有の情報が表示されます。</p>
</li>
<li>
<p><strong>Snapshots</strong>: このタイルでは、既存のスナップショットに関する情報を表示し、スナップショットをすばやく作成するためのボタンも表示されます。</p>
</li>
<li>
<p><strong>Network</strong>: このタイルでは、ソフトウェア定義ネットワーク（SDN）上の仮想マシンのIPアドレスと内部ホスト名が表示されます。高度なネットワークが定義されていない場合、VMは自動的にPodネットワークに接続されます。このラボの後半では、高度なネットワークオプションと、VMの接続性をカスタマイズする方法について説明します。</p>
</li>
<li>
<p><strong>Utilization</strong>: このタイルでは、CPU、メモリ、ストレージ、ネットワークスループットなど、現在この仮想マシンで使用中のリソースの概要が表示されます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/17_Fedora_Details.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/17_Fedora_Details.png" alt="17 Fedora Details" width="100%"></a>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>VMの詳細を確認したら、<strong>Events</strong> タブをクリックして、先ほど行われたプロビジョニングプロセスの詳細を確認します。VMの作成に問題がある場合は、このタブにも表示されます。作成中に発生したイベントは以下の通りです。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/18_Fedora_Events.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/18_Fedora_Events.png" alt="18 Fedora Events" width="100%"></a>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>DataVolume</em> が作成されました。 <em>DataVolumes</em> は、仮想マシンの作成ワークフロー中に、OpenShift ネイティブストレージへのクローンまたはインポートプロセスを抽象化し、VM ディスクの作成を管理するために使用されます。</p>
</li>
<li>
<p>新しい <em>VM インスタンス</em> Fedora01 が起動しました。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin_vms"><a class="anchor" href="#admin_vms"></a>仮想マシンの管理</h2>
<div class="sectionbody">
<div class="paragraph">
<p>仮想マシンの管理運用は、単にVMを作成し構成をカスタマイズするだけではありません。プラットフォーム管理者として、VMの状態を制御し、ライブマイグレーションを実行して、リソースのバランス調整、メンテナンスタスクの実行、ノードの再構成を行う必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Configuration</strong> タブをクリックすると、仮想マシンのリソースに関する詳細情報の取得や変更を行うことができます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/19_VM_Configuration.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/19_VM_Configuration.png" alt="19 VM Configuration" width="100%"></a>
</div>
</div>
<div class="paragraph">
<p>このタブには7つのサブタブがあります。</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/20_Configuration_Tab.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/20_Configuration_Tab.png" alt="20 Configuration Tab" width="100%"></a>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Details</strong>: このタブでは、VMの物理的特徴がすべて1つのパネルに表示されます。 ここから、CPUやメモリの変更、ホスト名の変更、パススルードライブの追加、ブート順の変更など、さまざまな記述子や基本ハードウェア構成の編集を行うことができます。</p>
</li>
<li>
<p><strong>Storage</strong>: このタブにはシステムに接続されたディスクがリストされ、新しいディスクをシステムに追加することができます。ゲストがエージェントで構成されている場合、ファイルシステムと使用率がリストされます。ここでは、追加のディスクとして <em>ConfigMaps</em> 、<em>Secrets</em> 、および <em>Service Accounts</em> をアタッチすることができます。これは、仮想マシンで実行中のアプリケーションに構成データを渡す場合に便利です。</p>
</li>
<li>
<p><strong>Network</strong>: このタブには、VM用に現在構成されているネットワークインターフェースが表示され、新しいインターフェースを追加することもできます。</p>
</li>
<li>
<p><strong>Scheduling</strong>: このタブには、VMの実行場所と、退避時の対応戦略（Eviction strategy）を示す高度な構成オプションが含まれています。このタブは、アフィニティルール/アンチアフィニティルール、ノードセレクタと許容範囲の設定、およびVMがどのクラスタノードにスケジュールされるかに影響するその他の動作の設定に使用されます。</p>
</li>
<li>
<p><strong>SSH</strong>: このタブでは、構成済みのロードバランサー上で SSH サービスを作成するか、機能が有効になっている場合は公開 SSH 鍵を注入することで、マシンへのリモートアクセスを構成できます。</p>
</li>
<li>
<p><strong>Initial run</strong>: このタブでは、Linux の <em>cloud-init</em> または Microsoft Windows の <em>sys-prep</em> を構成できます。これには、SSH 鍵の注入、アプリケーションのインストール、ネットワーク構成など、最初の起動時に実行するコマンドの設定が含まれます。</p>
</li>
<li>
<p><strong>Metadata</strong>: このタブには、仮想マシンに現在適用されているラベルとアノテーションが表示されます。これらの値を変更することで、特定の目的のためにマシンにタグ付けしたり、マシンを一意に識別することで自動ワークフローを有効にすることができます。</p>
</li>
</ul>
</div>
</li>
<li>
<p>これらの各項目をクリックして自由に探索することができますが、入門的な目的では、ストレージとネットワークに特に焦点を当ててみましょう。</p>
</li>
<li>
<p><strong>Storage</strong> サブタブをクリックして、VMに関連付けられているディスクの一覧を表示します。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/21_Storage_Tab.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/21_Storage_Tab.png" alt="21 Storage Tab" width="100%"></a>
</div>
</div>
<div class="paragraph">
<p>この環境では、ディスクに使用されるストレージのソースとタイプを定義するデフォルトの StorageClass は <strong>ocs-external-storagecluster-ceph-rbd</strong> と呼ばれます。 このストレージは、OpenShift Data Foundation (ODF) が仮想マシンの実行用に提供するデフォルトのタイプです。 各ストレージプロバイダには、VM ディスクをバックアップするストレージの特性を定義する異なるストレージクラスがあります。</p>
</div>
</li>
<li>
<p>VMにアタッチされたネットワークインターフェースを確認するには、<strong>Network</strong> サブタブをクリックします。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/22_Network_Tab.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/22_Network_Tab.png" alt="22 Network Tab" width="100%"></a>
</div>
</div>
<div class="paragraph">
<p>VMが作成されると、デフォルトで <strong>Pod Networking</strong> ネットワークの <strong>masquerade</strong> タイプのインターフェースが作成されます。これによりVMがSDNに接続され、VMからOpenShiftクラスターの外部へのアクセスが可能になります。クラスター内の他のVMやPodは、このインターフェースを使用して仮想マシンにアクセスできます。</p>
</div>
<div class="paragraph">
<p>さらに、SDN に接続された VM は、ロードバランサータイプのサービスである Route を使用して外部からアクセスすることもできます。また、外部ネットワークへの直接アクセスを許可するように Network Attachment Definition を構成することもできます。この概念については、後ほど詳しく説明します。</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="vm_state"><a class="anchor" href="#vm_state"></a>仮想マシンの状態の制御</h2>
<div class="sectionbody">
<div class="paragraph">
<p>仮想化環境の管理権限を持つユーザーとして、ウェブコンソールから仮想マシンの停止、開始、再起動、一時停止、および一時停止の解除を行うことができます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Overview</strong> タブをクリックして、サマリー画面に戻ります。</p>
</li>
<li>
<p>右上のコーナーに、実行状態のショートカットボタン（停止、再起動、一時停止、および開始）があります。また、<strong>Actions</strong> というタイトルのドロップダウンメニューもあります。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/23_VM_State_Actions.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/23_VM_State_Actions.png" alt="23 VM State Actions" width="100%"></a>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Stop</strong>: 仮想マシンの正常なシャットダウンを開始します。</p>
</li>
<li>
<p><strong>Restart</strong>: オペレーティングシステムにシグナルを送信して仮想マシンを再起動します。 ゲスト統合が適切に機能するために必要です。</p>
</li>
<li>
<p><strong>Pause</strong>: プロセスは凍結され、CPUリソースやI/Oへのアクセスはできなくなりますが、ハイパーバイザーレベルでVMが使用するメモリは割り当てられたままになります。</p>
</li>
<li>
<p><strong>Start</strong>: 停止した仮想マシンを起動します。仮想マシンが稼働中の場合は、このボタンはグレー表示されます。</p>
</li>
</ul>
</div>
</li>
<li>
<p>ショートカットボタンは便利ですが、<strong>Actions</strong> メニューをクリックしてドロップダウンリストに表示されるオプションを選択することでも、これらのオプションやその他のオプションにアクセスできます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/24_VM_Actions_Menu.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/24_VM_Actions_Menu.png" alt="24 VM Actions Menu" width="100%"></a>
</div>
</div>
</li>
<li>
<p><strong>Stop</strong> ボタンをクリックし、仮想マシンが <strong>Stoped</strong> 状態になるまで待ちます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/25_VM_Stopped.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/25_VM_Stopped.png" alt="25 VM Stopped" width="100%"></a>
</div>
</div>
</li>
<li>
<p><strong>Actions</strong> をクリックすると、<strong>Start</strong> オプションが表示され、<strong>Restart</strong> および <strong>Pause</strong> オプションはグレー表示されます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/26_VM_Actions_List_Stopped.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/26_VM_Actions_List_Stopped.png" alt="26 VM Actions List Stopped" width="100%"></a>
</div>
</div>
</li>
<li>
<p><strong>Start</strong> をクリックし、<strong>Running</strong> ステータスになるまで待ちます。</p>
</li>
<li>
<p><strong>Actions</strong> メニューまたはショートカットボタンを使用して、<strong>Pause</strong> オプションをクリックします。 仮想マシンの状態が <strong>Paused</strong> に変わります。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/27_VM_Actions_Paused.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/27_VM_Actions_Paused.png" alt="27 VM Actions Paused" width="100%"></a>
</div>
</div>
</li>
<li>
<p><strong>Actions</strong> メニューの <strong>Unpause</strong> オプションを使用するか、ショートカットボタンを使用して仮想マシンを再開します。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="live_migrate"><a class="anchor" href="#live_migrate"></a>仮想マシンのライブマイグレーション</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このセクションでは、VM をシャットダウンせずに、VM を OpenShift ノードから別のノードにマイグレートします。ライブマイグレーションには、VMディスクをソースノードとデスティネーションノードの両方に同時にマウントできるように、<strong>ReadWriteMany</strong> (RWX) ストレージが必要です。OpenShiftの仮想化は、あなたがよく知っている他の仮想化ソリューションとは異なり、各クラスタメンバーにマウントされたモノリシックなデータストアを使用して、多数のVMディスクを多数の異なるVM用に保持するものではありません。代わりに、各VMディスクは、必要とされる時に、必要とされる場所にのみマウントされる独自のボリュームに保存されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>仮想マシンが稼働している物理ノードを確認するには、<strong>Overview</strong> ページの <strong>一般</strong> タイルの下にある <strong>Pod</strong> 名 <em>virt-launcher-fedora01-uuid</em> をクリックします。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/28_Pod_Name.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/28_Pod_Name.png" alt="28 Pod Name" width="100%"></a>
</div>
</div>
</li>
<li>
<p>これにより、Podの詳細ページが表示されます。<strong>Node</strong> というセクションヘッダーを検索し、そのPodが実行されているワーカーの名前を確認します。このスクリーンショットでは、<em>worker-cluster-ttgmt-3</em> で実行されています。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/29_Pod_Details_Node.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/29_Pod_Details_Node.png" alt="29 Pod Details Node" width="100%"></a>
</div>
</div>
</li>
<li>
<p>ブラウザの戻るボタンをクリックして、<strong>Overview</strong> ページに戻ります。</p>
</li>
<li>
<p><strong>Actions</strong> メニューを使用して、<strong>Migration</strong> &#8594; <strong>Compute</strong> のオプションを選択します。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/30_VM_Dialog_Migrate.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/30_VM_Dialog_Migrate.png" alt="30 VM Dialog Migrate" width="100%"></a>
</div>
</div>
</li>
<li>
<p>数秒後、VMのステータスが <strong>Migrating</strong> に変更され、その進捗状況を確認できるようになります。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/31_VM_Migrating.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/31_VM_Migrating.png" alt="31 VM Migrating" width="100%"></a>
</div>
</div>
</li>
<li>
<p>移行が完了すると、VMは <strong>Running</strong> ステータスに戻りますが、新しいノード上で稼働します。確認するために、<em>virt-launcher-fedora01-uuid</em> のPod名をクリックしてみましょう。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/32_Migrated_Status.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/32_Migrated_Status.png" alt="32 Migrated Status" width="100%"></a>
</div>
</div>
</li>
<li>
<p>仮想マシンが新しいノード（<em>worker-cluster-ttgmt-2</em>）上で稼働していること、および、ライブマイグレーションプロセスによりVMインスタンスが新しいワーカーノード上の新しいPodに中断なく転送されたため、Pod自体が新しいPodに新しい一意のIDで存在していることが確認できます。</p>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/virt/2025_spring/module-01-intro/33_Pod_Details_Node_Migrated.png" target="blank"><img src="_images/virt/2025_spring/module-01-intro/33_Pod_Details_Node_Migrated.png" alt="33 Pod Details Node Migrated" width="100%"></a>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_まとめ"><a class="anchor" href="#_まとめ"></a>まとめ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このラボでは、OpenShift Virtualizationの仮想化管理環境の概要を説明し、状態管理や物理ホスト間のライブマイグレーションなど、基本的な仮想マシン管理タスクをいくつか実行しました。これらはどちらも、プラットフォーム管理者としてよく必要となる一般的なタスクであり、OpenShift VirtualizationでVMを操作する際に利用できる基本的な機能に慣れるための良い方法です。</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="70-index.html">0. はじめに</a></span>
  <span class="next"><a href="72-module-02-mtv.html">2. 既存の仮想マシンの移行</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
